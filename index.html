<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Salish Sea Wave Conditions | Halibut Bank, Strait of Georgia, and Marine Forecasts</title>

  <meta name="description" content="Live wave, wind, tide, and storm surge conditions across the Salish Sea, including Halibut Bank, English Bay, and the Strait of Georgia. Auto-updated from Environment Canada and NOAA sources." />
  <meta name="keywords" content="Salish Sea, Halibut Bank, Strait of Georgia, English Bay, waves, surf, marine forecast, storm surge, tide, buoy data, Environment Canada, NOAA, marine conditions, BC coast, Vancouver waves, British Columbia marine weather, Pacific Northwest ocean conditions, wave forecast, sea state, boating conditions, sailing forecast, fishing weather, ocean buoy, wave height, swell forecast, coastal weather, Juan de Fuca, Boundary Bay, real-time wave data, marine safety" />
  <meta name="author" content="Salish Sea Wave Conditions Project" />
  <meta name="robots" content="index, follow" />

  <!-- Open Graph for social sharing -->
  <meta property="og:title" content="Salish Sea Wave Conditions | Real-time Marine Data" />
  <meta property="og:description" content="Hourly updated marine conditions for Halibut Bank, English Bay, and the Strait of Georgia. Includes wave height, wind, temperature, and storm surge forecasts." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://halibutbank.ca/" />
  <meta property="og:image" content="https://halibutbank.ca/assets/img/social_preview.jpg" />

  <link rel="canonical" href="https://halibutbank.ca/" />
  <link rel="stylesheet" href="/assets/css/style-v4.css?v=20251112" />
  <link rel="stylesheet" href="/assets/css/nav-tide-styles-v4.css" />
  <link rel="stylesheet" href="/assets/css/stations-map-v4.css" />
  <link rel="stylesheet" href="/assets/css/warning-banner-v4.css" />

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>
  
  <style>
    header {
      margin-bottom: 0;
    }
    
    .site-tagline {
      background: linear-gradient(to bottom, rgba(224, 242, 255, 0.5), rgba(224, 242, 255, 0.8));
      text-align: center;
      font-size: 1rem;
      font-style: italic;
      color: #2c5282;
      padding: 1rem 1.5rem;
      margin: 0;
      border-bottom: 1px solid rgba(66, 153, 225, 0.2);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    
    @media (max-width: 768px) {
      .site-tagline {
        font-size: 0.9rem;
        padding: 0.85rem 1rem;
      }
    }
  </style>
</head>

<body>
  <!-- Warning Banner Container -->
  <div id="warning-banner-container" aria-live="polite" role="alert"></div>

  <!-- Navigation -->
  <nav class="main-nav">
    <a href="/" class="nav-link active">Buoys</a>
    <a href="/tides.html" class="nav-link">Tides</a>
    <a href="/forecasts.html" class="nav-link">Forecasts</a>
    <a href="/storm_surge.html" class="nav-link">Storm Surge</a>
    <a href="/winds.html" class="nav-link">Winds</a>
  </nav>

  <header>
    <h1>Salish Sea Wave Conditions</h1>
  </header>
  
  <div class="site-tagline">
    Real-time wave, wind, and tide conditions across the Salish Sea, Strait of Georgia, and Juan de Fuca Strait.
  </div>

  <main id="buoy-container" aria-live="polite" aria-label="Buoy data cards">
    <p>Loading latest buoy data‚Ä¶</p>
  </main>

  <!-- Stations Map Section -->
  <section id="map-section">
    <h2>Monitoring Stations</h2>
    <div class="map-legend">
      <span class="legend-item"><span class="legend-icon" role="img" aria-label="Wave icon">üåä</span> Wave Station</span>
      <span class="legend-item"><span class="legend-icon" role="img" aria-label="Wind icon">üí®</span> Wind Station</span>
      <span class="legend-item"><span class="legend-icon" role="img" aria-label="Location pin icon">üìç</span> Tide Station</span>
    </div>
    <div id="stations-map"></div>
  </section>

  <section id="charts-section">
    <h2>24-Hour Trends</h2>
    <div id="wave-comparison-chart" class="w-full h-400"></div>
    <div class="mt-sm p-md bg-surface-light rounded-md text-sm color-muted text-center leading-relaxed">
      <strong>Wave Breaking Thresholds:</strong>
      <span class="color-warning font-semibold">0.7m</span> ‚Äî Small wind-driven waves may begin to break on exposed sandy beaches |
      <span class="color-error font-semibold">1.2m</span> ‚Äî Moderate waves begin breaking on exposed sandy beaches
    </div>
    <div id="buoy-selector">
      <label for="chart-buoy-select">Select Buoy:</label>
      <select id="chart-buoy-select">
        <option value="4600146">Halibut Bank</option>
        <option value="4600304">English Bay</option>
        <option value="CRPILE">Crescent Beach Ocean (Boundary Bay)</option>
        <option value="CRCHAN">Crescent Channel</option>
        <option value="4600303">Southern Georgia Strait</option>
        <option value="4600131">Sentry Shoal</option>
        <option value="46087">Neah Bay</option>
        <option value="46088">New Dungeness (Hein Bank)</option>
        <option value="46267">Angeles Point</option>
      </select>
      <a href="#stations-map" id="show-buoy-on-map-btn" onclick="showSelectedBuoyOnMap(event)" style="margin-left: 1rem; padding: 0.5rem 1rem; background: #0077be; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem; display: inline-block;">Show on Map</a>
    </div>

    <div id="wave-chart" class="w-full h-500"></div>
    <!-- New Dungeness second chart (hidden by default) -->
    <div id="wave-period-chart" class="w-full h-500 hidden mt-lg"></div>

    <div id="wind-chart" class="w-full h-400"></div>
    <div id="temp-chart" class="w-full h-400"></div>
  </section>

  <div id="wave-height-table-section">
    <h2>24-Hour Wave Height Summary</h2>
    <div class="data-table">
      <table id="wave-height-table">
        <!-- Table will be populated by JavaScript -->
      </table>
    </div>
  </div>

  <!-- Storm Surge Forecast Section -->
  <section id="storm-surge-section">
    <div class="flex-between mb-md">
      <h2 class="mt-0">Storm Surge Forecast</h2>
      <a href="/storm_surge.html" class="button-primary" aria-label="View full storm surge forecast page">
        View Full Forecast ‚Üí
      </a>
    </div>

    <div class="mb-md text-center">
      <label for="surge-station-select">Select Station: </label>
      <select id="surge-station-select" style="padding: 0.5rem; font-size: 1rem;">
        <!-- Options populated by JavaScript -->
      </select>
      <a href="#stations-map" id="show-surge-on-map-btn" onclick="showSelectedSurgeOnMap(event)" style="margin-left: 1rem; padding: 0.5rem 1rem; background: #0077be; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem; display: inline-block;">Show on Map</a>
      <span id="active-surge-indicator" style="margin-left: 1rem; color: #0077be;"></span>
    </div>

    <div id="surge-chart" class="w-full h-500"></div>
    <div id="surge-metadata" class="mt-md text-center text-sm color-muted"></div>
  </section>

  <!-- About Section -->
  <section class="about-section">
    <h3>About</h3>
    <p>
      <strong>Salish Sea Wave Conditions</strong> provides real-time marine data for
      <strong>Halibut Bank</strong>, <strong>English Bay</strong>, <strong>Boundary Bay</strong>,
      and the <strong>Strait of Georgia</strong>. Data is automatically collected from
      Environment Canada, NOAA, DFO, and City of Surrey monitoring stations, processed locally,
      and displayed here for research and recreational awareness.
    </p>

    <p>
      Features include <em>wave height</em>, <em>wind speed</em>, <em>tide predictions</em>,
      <em>storm surge forecasts</em>, and <em>temperature trends</em> across the
      BC coast and Salish Sea region.
    </p>

    <p class="border-top" style="margin-top: 1.5rem;">
      This site is <strong>actively developed</strong> and open source.
      For feature requests or feedback, email <a href="mailto:windwaves604@outlook.com" class="color-primary">windwaves604@outlook.com</a>
      or visit the <a href="https://github.com/Keelando/surf-website" target="_blank" rel="noopener" class="github-link color-primary inline-flex gap-sm" aria-label="Visit GitHub repository">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="align-middle" aria-hidden="true">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
        GitHub repository
      </a>.
    </p>

    <!-- <div style="margin-top: 1.5rem; padding: 1.25rem; background: #f5f9fc; border-radius: 8px; text-align: center; border: 1px solid #e0e7ee;">
      <p style="margin: 0 0 0.75rem 0; color: #2c5282; font-weight: 600;">Support This Project</p>
      <p style="margin: 0 0 1rem 0; font-size: 0.95rem; color: #555;">
        Help keep the server running and data flowing. All donations go toward hosting costs and infrastructure.
      </p>
      <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
        <a href="https://paypal.me/yourusername" target="_blank" rel="noopener"
           style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.65rem 1.25rem; background: #0070ba; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; transition: background 0.2s;">
          <span>‚òï</span> PayPal
        </a>
        <a href="https://ko-fi.com/yourusername" target="_blank" rel="noopener"
           style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.65rem 1.25rem; background: #ff5e5b; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; transition: background 0.2s;">
          <span>‚òï</span> Ko-fi
        </a>
      </div>
    </div> -->
  </section>

  <!-- Navigation (Bottom) -->
  <nav class="main-nav">
    <a href="/" class="nav-link active">Buoys</a>
    <a href="/tides.html" class="nav-link">Tides</a>
    <a href="/forecasts.html" class="nav-link">Forecasts</a>
    <a href="/storm_surge.html" class="nav-link">Storm Surge</a>
    <a href="/winds.html" class="nav-link">Winds</a>
  </nav>

  <footer>
    <p>Please independently verify this data and do not base recreational activities around this information. This website is in no way affiliated with Environment Canada, NOAA, DFO, or City of Surrey.</p>
    <p><small>Data sources: Environment Canada, NOAA NDBC, DFO IWLS, City of Surrey FlowWorks | <span id="timestamp">Loading...</span></small></p>
    <p class="mt-md">
      <a href="https://github.com/Keelando/surf-website" target="_blank" rel="noopener noreferrer" class="github-link inline-flex gap-md color-white no-underline" aria-label="View project on GitHub">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="align-middle" aria-hidden="true">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
        View on GitHub
      </a>
    </p>
  </footer>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
  <!-- Load logger first for global availability -->
  <script src="/assets/js/logger.js?v=20251117"></script>
  <script src="/assets/js/warning-banner.js?v=20251117"></script>
  <!-- Load chart utilities first to avoid race conditions -->
  <script src="/assets/js/chart-utils-v4.js?v=20251117"></script>
  <script src="/assets/js/main.js?v=20251120a"></script>
  <script src="/assets/js/stations-map.js?v=20251117"></script>
  <script src="/assets/js/wave-chart-v4.js?v=20251117"></script>
  <script src="/assets/js/wind-chart-v4.js?v=20251117"></script>
  <script src="/assets/js/temperature-chart-v4.js"></script>
  <script src="/assets/js/comparison-chart-v4.js?v=20251117"></script>
  <script src="/assets/js/wave-table-v4.js?v=20251117"></script>
  <script src="/assets/js/charts-v4.js?v=20251117"></script>
  <script src="/assets/js/storm_surge_chart-v4.js?v=20251117"></script>
</body>
</html>
